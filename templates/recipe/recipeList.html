{{define "head"}} {{end}} {{define "body"}}
<div class="page-content">
    <!-- <div class="nav">
        <a class="link-button" href="#">Home</a>
    </div> -->
    <h2>Recipes</h2>
    <ul>
        {{ range $key, $value := .Recipes }}
        <li>
            <strong>{{ $key }}</strong>: {{ $value.Title }}
        </li>
        {{ end }}
    </ul>
    <br/>

</div>
<div>
    <fieldset>
        <legend>Create New Recipe..</legend>
        <form id="createRecipeForm" action="http://api.recipe.localhost/recipe/" method="POST">
            <input type="text" name="title" placeholder="Title">
            <input id="submit" type="submit" value="Create">
            <script>
                $(function () {
                    $('#createRecipeForm').on('submit', function (event) {
                        $.ajax({
                            type: 'POST',
                            url: 'http://api.recipe.localhost/recipe/',
                            dataType: 'text',
                            xhrFields: {
                                withCredentials: true
                            },
                            crossDomain: true,
                            data: $('#createRecipeForm').serialize(),
                            success: function (data, x, response, z) {
                                // debugger;
                            },
                            error: function(x, y, z){
                                debugger;
                            },
                        });

                        return false;
                    });
                });
            </script>
        </form>
        
    </fieldset>
</div>
{{end}}